{"remainingRequest":"E:\\study_tool_from_D\\project\\hr_manage\\frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\study_tool_from_D\\project\\hr_manage\\frontend\\node_modules\\ts-loader\\index.js??ref--14-2!E:\\study_tool_from_D\\project\\hr_manage\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\study_tool_from_D\\project\\hr_manage\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\study_tool_from_D\\project\\hr_manage\\frontend\\src\\views\\organizations\\infoOrg.vue?vue&type=script&lang=ts&","dependencies":[{"path":"E:\\study_tool_from_D\\project\\hr_manage\\frontend\\src\\views\\organizations\\infoOrg.vue","mtime":1762104337477},{"path":"E:\\study_tool_from_D\\project\\hr_manage\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\study_tool_from_D\\project\\hr_manage\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\study_tool_from_D\\project\\hr_manage\\frontend\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"E:\\study_tool_from_D\\project\\hr_manage\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\study_tool_from_D\\project\\hr_manage\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"E:\\\\study_tool_from_D\\\\project\\\\hr_manage\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"E:\\\\study_tool_from_D\\\\project\\\\hr_manage\\\\frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/asyncToGenerator\"));\n\nvar _organizations = require(\"@/api/organizations\");\n\nvar _default = {\n  data: function data() {\n    return {\n      pageTitle: this.$route.params.orgLevel == 2 ? '一级机构' : '二级机构',\n      ruleForm: {\n        orgLevel: this.$route.params.orgLevel,\n        orgName: '',\n        parentId: null,\n        id: null\n      },\n      orgList: [],\n      optType: ''\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    console.log(this.optType);\n    console.log(this.$route.query.id);\n    this.optType = this.$route.params.id ? 'edit' : 'add';\n\n    if (this.optType === 'edit') {\n      var id = this.$route.params.id;\n      (0, _organizations.queryById)(id).then(function (response) {\n        if (response.data.code == 200) {\n          _this.ruleForm.orgName = response.data.data.orgName;\n          _this.ruleForm.parentId = response.data.data.parentId;\n          _this.ruleForm.id = response.data.data.id;\n          _this.ruleForm.orgLevel = response.data.data.orgLevel;\n          (0, _organizations.queryById)(id).then(function (response) {\n            if (response.data.code == 200) {\n              _this.ruleForm.parentId = response.data.data.parentId;\n            } else {\n              _this.$message.error('获取机构详情失败');\n            }\n          });\n        } else {\n          _this.$message.error('获取机构详情失败');\n        }\n      });\n    }\n\n    this.queryOrgList();\n  },\n  methods: {\n    queryOrgList: function () {\n      var _queryOrgList = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var params, response;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                params = {\n                  orgLevel: this.$route.params.orgLevel - 1\n                };\n                _context.prev = 1;\n                _context.next = 4;\n                return (0, _organizations.getOrgList)(params);\n\n              case 4:\n                response = _context.sent;\n                this.orgList = response.data.data;\n                console.log('异步请求结果成功');\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](1);\n                // 可以在这里添加错误处理，比如显示提示信息\n                this.$message.error('获取机构列表失败，请稍后重试');\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 9]]);\n      }));\n\n      function queryOrgList() {\n        return _queryOrgList.apply(this, arguments);\n      }\n\n      return queryOrgList;\n    }(),\n    submitForm: function submitForm(formName) {\n      var _this2 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          var params = {\n            id: null,\n            orgLevel: _this2.$route.params.orgLevel,\n            orgName: _this2.ruleForm.orgName,\n            parentId: _this2.ruleForm.parentId\n          };\n\n          if (_this2.optType === 'edit') {\n            params.id = _this2.$route.query.id;\n            (0, _organizations.updateOrg)(params).then(function (response) {\n              if (response.data.code == 200) {\n                _this2.$message.success('更新机构成功');\n\n                _this2.$router.push({\n                  path: \"/organizations/\".concat(_this2.ruleForm.orgLevel)\n                });\n              } else {\n                _this2.$message.error('更新机构失败');\n              }\n            });\n          } else {\n            (0, _organizations.addOrg)(params).then(function (response) {\n              if (response.data.code == 200) {\n                _this2.$message.success('创建机构成功');\n\n                _this2.$router.push({\n                  path: \"/organizations/\".concat(_this2.ruleForm.orgLevel)\n                });\n              } else {\n                _this2.$message.error('创建机构失败');\n              }\n            });\n          }\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["E:\\study_tool_from_D\\project\\hr_manage\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\study_tool_from_D\\project\\hr_manage\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\study_tool_from_D\\project\\hr_manage\\frontend\\src\\views\\organizations\\infoOrg.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\nimport {Vue, Component} from 'vue-property-decorator';\nimport {getOrgList, queryById, addOrg, updateOrg} from \"@/api/organizations\";\n\n  export default{\n    data(){\n      return{\n        pageTitle: this.$route.params.orgLevel == 2 ? '一级机构' : '二级机构',\n        ruleForm:{\n          orgLevel: this.$route.params.orgLevel,\n          orgName: '',\n          parentId: null,\n          id: null,\n        },\n        orgList: [],\n        optType: '',\n      }\n    },\n    created() {\n      console.log(this.optType);\n      console.log(this.$route.query.id);\n      this.optType = this.$route.params.id ? 'edit' : 'add';\n      if (this.optType === 'edit') {\n        const id = this.$route.params.id;\n        queryById(id).then((response) => {\n          if (response.data.code == 200) {\n            this.ruleForm.orgName = response.data.data.orgName;\n            this.ruleForm.parentId = response.data.data.parentId;\n            this.ruleForm.id = response.data.data.id;\n            this.ruleForm.orgLevel = response.data.data.orgLevel;\n            queryById(id).then((response) => {\n              if (response.data.code == 200) {\n                this.ruleForm.parentId = response.data.data.parentId;\n              } else {\n                this.$message.error('获取机构详情失败')\n              }\n            })\n          } else {\n            this.$message.error('获取机构详情失败')\n          }\n        })\n      }\n      this.queryOrgList();\n    },\n    methods: {\n      async queryOrgList() {\n        const params = {\n          orgLevel: this.$route.params.orgLevel - 1,\n        }\n\n        try {\n          // 使用await等待异步请求结果，确保在获取到数据后再继续执行后续代码\n          const response = await getOrgList(params);\n          this.orgList = response.data.data;\n          console.log('异步请求结果成功');\n        } catch (error) {\n          // 可以在这里添加错误处理，比如显示提示信息\n          this.$message.error('获取机构列表失败，请稍后重试');\n        }\n      },\n      submitForm(formName) {\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n            const params = {\n              id: null,\n              orgLevel: this.$route.params.orgLevel,\n              orgName: this.ruleForm.orgName,\n              parentId: this.ruleForm.parentId,\n            }\n            if (this.optType === 'edit') {\n              params.id = this.$route.query.id\n              updateOrg(params).then((response) => {\n                if (response.data.code == 200) {\n                  this.$message.success('更新机构成功');\n                  this.$router.push({ path: `/organizations/${this.ruleForm.orgLevel}` });\n                } else {\n                  this.$message.error('更新机构失败');\n                }\n              })\n            }else {\n              addOrg(params).then((response) => {\n                if (response.data.code == 200) {\n                  this.$message.success('创建机构成功');\n                  this.$router.push({path: `/organizations/${this.ruleForm.orgLevel}`});\n                } else {\n                  this.$message.error('创建机构失败');\n                }\n              })\n            }} else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n      },\n      resetForm(formName) {\n        this.$refs[formName].resetFields();\n      }\n    }\n  }\n"],"sourceRoot":""}]}